---
title: Ordering Context
---

classDiagram
    class Address {
        <<ValueObject>>
        -String street
        -String number
        -String complement
        -String neighborhood
        -String city
        -String state
        -ZipCode zipCode
    }

    class Product {
        <<ValueObject>>
        -ProductId id
        -ProductName name
        -Money price
        -Boolean inStock
        +checkOutOfStock() void
    }

    namespace CustomerAggregate {
        class Customer {
            <<AggregateRoot>>
            -CustomerId id
            -FullName fullName
            -BirthDate birthDate
            -Email email
            -Phone phone
            -Document document
            -Boolean promotionNotificationsAllowed
            -Boolean archived
            -Instant registeredAt
            -Instant archivedAt
            -LoyaltyPoints loyaltyPoints
            +addLoyaltyPoints(LoyaltyPoints) void
            +archive() void
            +enablePromotionNotifications() void
            +disablePromotionNotifications() void
            +changeName(FullName) void
            +changeEmail(Email) void
            +changePhone(Phone) void
            +changeAddress(Address) void
        }
    }
    Customer *-- Address: -address

    namespace OrderAggregate {
        class Recipient {
            <<ValueObject>>
            -FullName fullName
            -Document document
            -Phone phone
        }

        class Shipping {
            <<ValueObject>>
            -Money shippingCost
            -LocalDate expectedDeliveryDate
        }

        class Billing {
            <<ValueObject>>
            -FullName fullName
            -Document document
            -Phone phone
            -Email email
        }

        class OrderItem {
            <<Entity>>
            -OrderItemId id
            -ProductId productId
            -ProductName name
            -Money price
            -Quantity quantity
            -Money totalAmount
            ~ changeQuantity(Quantity) void
        }

        class OrderStatus {
            <<enumeration>>
            DRAFT
            PLACED
            PAID
            READY
            CANCELED
        }

        class PaymentMethod {
            <<enumeration>>
            CREDIT_CARD
            GATEWAY_BALANCE
        }

        class Order {
            <<AggregateRoot>>
            -OrderId id
            -CustomerId id
            -Money totalAmount
            -Quantity totalItems
            -Instant placedAt
            -Instant paidAt
            -Instant canceledAt
            -Instant readyAt
            +markAsPaid() void
            +markAsReady() void
            +cancel() void
            +place() void
            +isPaid() boolean
            +isCanceled() boolean
            +isReady() boolean
            +isDraft() boolean
            +isPlaced() boolean
            +addItem(Product, Quantity) void
            +changePaymentMethod(PaymentMethod) void
            +changeBilling(Billing) void
            +changeShipping(Shipping) void
            +changeItemQuantity(OrderItemId, Quantity) void
            +removeItem(OrderItemId) void
        }
    }
    Order --> Customer
    Order *-- OrderStatus: -status
    Order *-- PaymentMethod: -paymentMethod
    Order *-- Shipping: -shipping
    Order *-- Billing: -billing
    Order "0..n" *-- OrderItem: -items
    Shipping *-- Address: -address
    Shipping *-- Recipient: -recipient
    Billing *-- Address: -address
    OrderItem --> Product